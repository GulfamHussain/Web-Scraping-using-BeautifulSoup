# -*- coding: utf-8 -*-
"""timesJob-All .ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1Z20TcRu1b3aqpZPpE5oqj5f-KUZGdT5y
"""

from bs4 import BeautifulSoup
import requests

html_request = requests.get('https://www.timesjobs.com/candidate/job-search.html?searchType=personalizedSearch&from=submit&txtKeywords=Java+%2C+Python&txtLocation=').text
soup = BeautifulSoup(html_request,'html.parser')
# print(soup.prettify())

rows  = soup.find_all('li', class_='clearfix job-bx wht-shd-bx' )
all_jobs_dic ={}
job_no =0
for row in rows:
  publish_date = row.find('span',class_ = 'sim-posted').span.text.replace(" ","")
  

  company_name = row.h3.find(text=True, recursive=False).strip()  # company name
  req_skills = row.find('span',class_ = 'srp-skills').text.replace(" ","").strip()
   
  more_info = row.header.h2.a.get('href')

  sal_exp = row.find('ul',class_ = 'top-jd-dtl clearfix')
        
  ulList = sal_exp.find_all('li')
  for sing_item in ulList:
  

    index = 0     
    req_experience = ulList[index].find(text=True, recursive=False).replace(" ","")
    index+=1 
    salary = ulList[index].find(text=True, recursive=False).replace(" ","")
  job_no +=1
  all_jobs_dic[job_no] = [company_name,req_skills,req_experience,salary,publish_date,more_info]
 


df = pd.DataFrame.from_dict(all_jobs_dic,orient='index', columns=['company_name','req_skills','req_experience','salary','publish_date','more_info'])
df.to_csv("PythonJavaJobsFinal.csv")
# for all_jobs in all_jobs_list:
  # print(all_jobs)
    # print(f'''
    #       Company Name :{company_name}
    #       Required Skills:{req_skills}
    #       Required Experience: {req_experience}
    #       Salary Range:{salary}
    #       Publish Date: {publish_date}
    #       More Info: {more_info}
          
    #     ''')
df

df.shape

df.describe()

df['more_info']

